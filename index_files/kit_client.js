(function(){for(var a=!1,b=[],d=function(){if(!a){a=!0;for(var d=0;d<b.length;d++)b[d]();b=[]}},e=location.protocol||"https:",g=document.getElementsByTagName("script"),f="games.mail.ru",h=/\/\/([^/]+)\/s?js\/(kit_client|kit\/_utils).js/,k=0;k<g.length;k++){var m=(g[k].src||"").match(h);if(m){f=m[1];break}}var n=f;window.GMR=window.GMR||{};var q=window.GMR.Utils={getDomain:function(){return f},getStaticDomain:function(){return n},gebi:function(a){return document.getElementById(a)},addListener:function(a,
b,d){return a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)},addOnLoadListener:function(a,b){a&&b&&(a.onreadystatechange=a.onload=function(){var d=a.readyState;b.done||d&&!/loaded|complete/.test(d)||(b(),a.onreadystatechange=a.onload=null)})},onDomReady:function(d){"function"===typeof d&&(a?setTimeout(d,1):b.push(d))},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=
!0},setInnerHtml:function(a,b){a.innerHTML="_"+b;a.removeChild(a.firstChild)},addClass:function(a,b){for(var d=b.split(" "),e=0;e<d.length;e++)0>a.className.indexOf(d[e])&&(a.className=a.className+" "+d[e])},removeClass:function(a,b){a.className=(a.className||"").replace(new RegExp("\\s*\\b"+b+"\\b\\s*","g")," ")},loadScript:function(a,b){var d=document.createElement("script");d.type="text/javascript";d.src=a;d.onload=b;(document.body||document.head).appendChild(d)},loadJSONP:function(a,b){"object"!=
typeof GMR.callbacks&&(GMR.callbacks={idx:0});var d=++GMR.callbacks.idx;GMR.callbacks[d]=function(){b.apply(this,arguments);delete GMR.callbacks[d]};a=a+(a.match(/\?/)?"&":"?")+"callback="+encodeURIComponent("GMR.callbacks["+d+"]");q.loadScript(a)},loadXdm:function(a){if(window.easyXDM)return a();q.loadScript(e+"//"+n+"/js/easyXDM.min.js",a);return!1},extend:function(){for(var a={},b=0;b<arguments.length;b++){var d=arguments[b],e;for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a},parseUrlEncoded:function(a){var b=
{};a=a.split("&");for(var d=0;d<a.length;d++){var e=a[d].split("=",2);b[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return b},getCookie:function(a){return(a=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0},setCookie:function(a,b,d){d=d||{};var e=d.expires;if("number"==typeof e&&e){var f=new Date;f.setTime(f.getTime()+1E3*e);e=d.expires=f}e&&e.toUTCString&&(d.expires=e.toUTCString());b=encodeURIComponent(b);
a=a+"="+b;for(var g in d)a+="; "+g,b=d[g],!0!==b&&(a+="="+b);document.cookie=a}};q.addListener(document,"DOMContentLoaded",d);q.addListener(window,"load",d)})();window.GMR=window.GMR||{};
(function(a){function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a,d){if(b(a))for(var e=0;e<a.length;e++)d(a[e]);else d(a)}function e(a){var f="pending",h=[],k=[],m=[],n=null,q={done:function(){for(var a=0;a<arguments.length;a++)if(arguments[a])if(b(arguments[a]))for(var d=arguments[a],e=0;e<d.length;e++)"resolved"===f&&d[e].apply(this,n),h.push(d[e]);else"resolved"===f&&arguments[a].apply(this,n),h.push(arguments[a]);return this},fail:function(){for(var a=0;a<arguments.length;a++)if(arguments[a])if(b(arguments[a]))for(var d=
arguments[a],e=0;e<d.length;e++)"rejected"===f&&d[e].apply(this,n),k.push(d[e]);else"rejected"===f&&arguments[a].apply(this,n),k.push(arguments[a]);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},progress:function(){for(var a=0;a<arguments.length;a++)if(arguments[a])if(b(arguments[a]))for(var d=arguments[a],e=0;e<d.length;e++)"pending"===f&&m.push(d[e]);else"pending"===f&&m.push(arguments[a]);return this},then:function(){1<arguments.length&&arguments[1]&&
this.fail(arguments[1]);0<arguments.length&&arguments[0]&&this.done(arguments[0]);2<arguments.length&&arguments[2]&&this.progress(arguments[2])},promise:function(a){if(null==a)return q;for(var b in q)a[b]=q[b];return a},state:function(){return f},debug:function(){console.log("[debug]",h,k,f)},isRejected:function(){return"rejected"===f},isResolved:function(){return"resolved"===f},pipe:function(a,b,f){return e(function(e){d(a,function(a){"function"===typeof a?s.done(function(){var b=a.apply(this,arguments);
b&&"function"===typeof b?b.promise().then(e.resolve,e.reject,e.notify):e.resolve(b)}):s.done(e.resolve)});d(b,function(a){"function"===typeof a?s.fail(function(){var b=a.apply(this,arguments);b&&"function"===typeof b?b.promise().then(e.resolve,e.reject,e.notify):e.reject(b)}):s.fail(e.reject)})}).promise()}},s={resolveWith:function(a){if("pending"===f){f="resolved";for(var b=n=1<arguments.length?arguments[1]:[],d=0;d<h.length;d++)h[d].apply(a,b)}return this},rejectWith:function(a){if("pending"===
f){f="rejected";for(var b=n=1<arguments.length?arguments[1]:[],d=0;d<k.length;d++)k[d].apply(a,b)}return this},notifyWith:function(a){if("pending"===f)for(var b=n=1<arguments.length?arguments[1]:[],d=0;d<m.length;d++)m[d].apply(a,b);return this},resolve:function(){return this.resolveWith(this,arguments)},reject:function(){return this.rejectWith(this,arguments)},notify:function(){return this.notifyWith(this,arguments)}},r=q.promise(s);a&&a.apply(r,[r]);return r}e.when=function(){if(2>arguments.length){var a=
arguments.length?arguments[0]:void 0;return a&&"function"===typeof a.isResolved&&"function"===typeof a.isRejected?a.promise():e().resolve(a).promise()}return function(a){for(var b=e(),d=a.length,g=0,n=Array(d),q=0;q<a.length;q++)(function(e){var r=null;a[e].done?a[e].done(function(){n[e]=2>arguments.length?arguments[0]:arguments;++g==d&&b.resolve.apply(b,n)}).fail(function(){b.reject(arguments)}):(r=a[e],a[e]=new Deferred,a[e].done(function(){n[e]=2>arguments.length?arguments[0]:arguments;++g==d&&
b.resolve.apply(b,n)}).fail(function(){b.reject(arguments)}).resolve(r))})(q);return b.promise()}(arguments)};a.Deferred=e})(window.GMR);(function(){window.GMR=window.GMR||{};window.GMR.detect=function(){Array.prototype.map||(Array.prototype.map=function(a,b){var d,e,f;if(null==this)throw new TypeError(" this is null or not defined");var g=Object(this),h=g.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");b&&(d=b);e=Array(h);for(f=0;f<h;){var k;f in g&&(k=g[f],k=a.call(d,k,f,g),e[f]=k);f++}return e});var a=function(){};a.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"];
a.types=["browser","os","device"];a.regexes={browser_parsers:[{regex:"(OPR)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Opera"},{regex:"(YaBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},
{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",
family_replacement:"Swiftfox",other:!0},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Edge|Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},
{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",
family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.2)",
os_replacement:"Windows 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"}],mobile_os_families:[],device_parsers:[],mobile_browser_families:[]};a.families=function(){var b={};a.types.map(function(a){b[a]=[]});return b}();var b=Array.prototype.forEach,d=function(a,
b){for(var d={},e=0;e<b.length&&!(d=b[e](a));e++);return d},e=function(a,b){g(a,function(a){g(b,function(b){delete a[b]})})},g=forEach=function(a,d,e){if(null!=a)if(b&&a.forEach===b)a.forEach(d,e);else if(a.length===+a.length)for(var f=0,g=a.length;f<g;f++)d.call(e,a[f],f,a);else for(f in a)_.has(a,f)&&d.call(e,a[f],f,a)},f=function(a){return!(!a||"undefined"==typeof a||null==a)},h=function(a){var b="";a=a||{};f(a)&&f(a.major)&&(b+=a.major,f(a.minor)&&(b+="."+a.minor,f(a.patch)&&(b+="."+a.patch)));
return b},k=function(a){a=a||{};var b=h(a);b&&(b=" "+b);return a&&f(a.family)?a.family+b:""};a.parse=function(b){var g=function(b){return a.regexes[b+"_parsers"].map(function(a){var d=new RegExp(a.regex),e=a[("browser"===b?"family":b)+"_replacement"],f=a.major_version_replacement;return function(b){b=b.match(d);if(!b)return null;var g={};g.family=(e?e.replace("$1",b[1]):b[1])||"other";g.major=parseInt(f?f:b[2])||null;g.minor=b[3]?parseInt(b[3]):null;g.patch=b[4]?parseInt(b[4]):null;g.tablet=a.tablet;
g.man=a.manufacturer||null;return g}})},q=g("browser"),s=g("os"),r=g("device"),g=new function(){};g.source=b;g.browser=d(b,q);f(g.browser)?(g.browser.name=k(g.browser),g.browser.version=h(g.browser)):g.browser={};g.os=d(b,s);f(g.os)?(g.os.name=k(g.os),g.os.version=h(g.os)):g.os={};g.device=d(b,r);f(g.device)?(g.device.name=k(g.device),g.device.version=h(g.device)):g.device={tablet:!1,family:"Other"};b={};"Spider"===g.browser.family?g.device.type="Spider":g.browser.tablet||g.os.tablet||g.device.tablet?
g.device.type="Tablet":b.hasOwnProperty(g.browser.family)?g.device.type="Mobile":g.device.type="Desktop";g.device.manufacturer=g.browser.man||g.os.man||g.device.man||null;e([g.browser,g.os,g.device],["tablet","man"]);return g};return a}()})();(function(){var a,b=window.GMR.Utils,d,e=b.getStaticDomain(),g=window.GMR.detect.parse(navigator.userAgent),f=g.browser.family,h=g.browser.major,k,m,n,q,s=function(){b.removeClass(k,"gmrGcDownload_active");m.parentNode.removeChild(m);n&&n.parentNode.removeChild(n);q&&q.parentNode.removeChild(q);m=q=n=null},r=function(e,g,r){"safari"!==f.toLowerCase()&&(a=r||window.GMR.settings.download_theme||"dark",d="gmrGcDownload_theme-"+a,n=document.createElement("div"),k=document.body,m=document.createElement("div"),
m.className="gmrGcDownload__popup__overlay",n.className="gmrGcDownload__popup__arrow",s.title="\u0417\u0430\u043a\u0440\u044b\u0442\u044c",k.appendChild(n),k.insertBefore(m,n),b.addClass(k,"gmrGcDownload_active "+d),b.addClass(document.getElementsByTagName("html")[0],"gmrBrowser_"+f+" gmrBrowser_"+f+h),b.addListener(m,"click",s))},t=function(e,g,r){"safari"!==f.toLowerCase()&&(a=r||window.GMR.settings.download_theme||"dark",d="gmrGcDownload_theme-"+a,n=document.createElement("div"),q=document.createElement("div"),
k=document.body,m=document.createElement("div"),m.className="gmrGcDownload__popup__overlay gmrGcDownload__popup__overlay_gradient",n.className="gmrGcDownload__popup__arrow",q.className="gmrGcDownload__popup__text",q.innerHTML="\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438",k.appendChild(n),k.appendChild(q),k.insertBefore(m,n),b.addClass(k,"gmrGcDownload_active "+d),b.addClass(document.getElementsByTagName("html")[0],"gmrBrowser_"+
f+" gmrBrowser_"+f+h),b.addListener(m,"click",s))};window.GMR.showDownloadHint=function(){var a=arguments;setTimeout(function(){r.apply(window,a)},1)};window.GMR.showSimpleDownloadHint=function(){var a=arguments;setTimeout(function(){t.apply(window,a)},1)};window.GMR.Utils.onDomReady(function(){if(!b.gebi("js-gmr-client-style")){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.id="js-gmr-client-style";a.href="//"+e+"/css/kit/client.css?r="+Math.random();document.body.appendChild(a)}})})();(function(){function a(){if(h&1)try{console.log.apply(console,arguments)}catch(a){var b=document.createElement("div");b.style.backgroundColor="white";b.style.padding="2px";document.body.appendChild(b);b.innerText=Array.prototype.join.call(arguments," ")}}function b(){if(!arguments.callee.called){arguments.callee.called=!0;var a=new Image;a.src=t+"//rs.mail.ru/d1611017.gif";a.style.width=a.style.height="0px";document.body.appendChild(a)}}function d(a){var b=new Image;b.src=t+"//rs.mail.ru/d1611018.gif";
b.style.width=b.style.height="0px";r.addOnLoadListener(b,a);clearTimeout(v);v=setTimeout(function(){a()},2E3);document.body.appendChild(b)}function e(a,b,d){a=a.getElementsByTagName("iframe")[0];a.style.width=b+"px";a.style.height=d+"px"}function g(b,f,g){a("XDM message: ",b);var h=r.parseUrlEncoded(b);switch(h.type){case "title":y.setTitle(h.title);break;case "show":y.show();y.adjust(h.width,h.height);break;case "adjust":y.adjust(h.width,h.height);break;case "adjust_block":e(g,h.width,h.height);
break;case "close":y.hide();y.clear();break;case "reload":window.location.reload();break;case "redirect":b=function(){arguments.callee.done||(arguments.callee.done=1,document.location=h.url)};d(b);setTimeout(b,100);break;case "show_signin":GMR.showSigninForm({page:h.page});break;case "show_signin_autoplay":b=document.location+((document.location+"").match(/\?/)?"&":"?")+"kit_autoplay=1";GMR.showSigninForm({page:b});break;case "show_signup":GMR.showSignupForm({page:h.page})}}function f(a){a&&a.page&&
window.console&&window.console.warn("Passing {page: '...'} to GMR.show(VK|OK|FB)Signin is deprecated! Use GMR.config({ page: '...' }) instead.");var b=String(GMR.settings.signup_page||GMR.settings.page||a.page||document.location),b=t+"//"+p+"/kit/social_back/?continue="+encodeURIComponent(b),d=t+"//"+p+"/kit/social_err/",b=a.authurl+(-1<a.authurl.indexOf("?")?"&":"?")+"client_id="+encodeURIComponent(a.client_id)+"&page="+encodeURIComponent(b)+"&fail="+encodeURIComponent(d),d=a.width||660;a=a.height||
550;var e=window.open("about:blank","_blank","menubar=no,scrollbars=no,resizable=yes,location=yes,status=no,width="+d+",height="+a);try{e.window.document.write('<link rel="stylesheet" href="//'+x+"/css/kit/client.css?r="+Math.random()+'"/><div class="gmrSignin__social__loader"></div>'),e.window.document.close()}catch(f){}e.moveTo((window.screen.availWidth-d)/2,(window.screen.availHeight-a)/2);e.focus();e.location=b;var g=setInterval(function(){if(e.closed){clearInterval(g);var a=document.cookie.match(/(?:^|; )socialback=([^;]*)/);
a&&a[1]?(document.cookie="socialback=; expires=Thu, 25 Mar 1999 00:00:00 GMT; domain=.mail.ru; path=/",window.location=decodeURIComponent(a[1])):window.location.reload()}},500);setTimeout(function(){clearInterval(g)},9E5);y.init();y.hide();y.clear()}var h=parseInt(((document.location.search+"").match(/\bkit_debug=(\d+)/)||[])[1]||0),k=((document.location.search+"").match(/\bsite_id=(.*?)(&|$)/)||[])[1]||"";if(!k.length){var m=document.cookie,n=m.indexOf("__partner_id="),q;-1<n&&(n=m.indexOf("=",n)+
1,q=m.indexOf(";",n),-1==q&&(q=m.length),k=decodeURIComponent(m.substring(n,q)))}var s=window.GMR;window.GMR=window.GMR||{};var r=window.GMR.Utils,t=location.protocol||"https:",p=r.getDomain(),u=p.match("gm1.corp")?"social.games.gm1.corp.mail.ru":p.match("gm2.corp")?"social.games.gm2.corp.mail.ru":"api.games.mail.ru/social",x=r.getStaticDomain(),v,y={overlayVisible:!1,darkness:null,holder:null,overlay:null,container:null,init:function(){function a(b){b=b||window.event;y.hide();y.clear();r.stopPropagation(b)}
if(!this.container){if(!r.gebi("js-gmr-client-style")){var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.id="js-gmr-client-style";b.href="//"+x+"/css/kit/client.css?r="+Math.random();document.body.appendChild(b)}b=document.createElement("div");document.body.appendChild(b);r.setInnerHtml(b,'<div id="js_kit_darkness" style="background-color: #000; z-index: 2000; opacity: 0.5; filter: alpha(opacity=50); position: fixed; display: none; top: 0; left: 0; width: 100%; height: 100%;"></div><div id="js_kit_holder" style="position: fixed; overflow-y: auto; overflow-x: hidden; visibility: hidden; top: 0; left: 0; z-index: 2001; cursor: default;"><div id="js_kit_overlay" style="position: relative; left: 50%; width: 300px; background-color: #fff;"><div id="js_kit_header" style="background-color: #3c3c3c; height: 39px; width: 100%; color: #fff; position: relative; padding: 0 20px; line-height: 39px; box-sizing: border-box; font-family: ProximaRegular, PTSans, sans-serif !important; font-size: 18px !important;"><span id="js_kit_header_title">Games.Mail.Ru</span><span id="js_kit_header_close" style="position: absolute; right: 13px; font-size: 21px !important; padding: 0 4px; cursor: pointer;">\u2715</span></div><div id="js_kit_container"></div></div></div>');
this.overlay=document.getElementById("js_kit_overlay");this.container=document.getElementById("js_kit_container");this.holder=document.getElementById("js_kit_holder");this.darkness=document.getElementById("js_kit_darkness");document.body.appendChild(this.holder);document.body.appendChild(this.darkness);document.body.removeChild(b);r.addListener(this.overlay,"click",function(a){a=a||window.event;r.stopPropagation(a)});r.addListener(window,"resize",function(){var a=y.overlay.getElementsByTagName("iframe")[0];
y.overlayVisible&&(y.show(),y.adjust(y.overlay.offsetWidth,a?a.offsetHeight:y.overlay.offsetHeight))});r.addListener(this.holder,"click",a);b=document.getElementById("js_kit_header_close");r.addListener(b,"click",a)}},getWindowSize:function(){var a={};"undefined"!=typeof window.innerWidth?(a.width=window.innerWidth,a.height=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(a.width=document.documentElement.clientWidth,
a.height=document.documentElement.clientHeight):(a.width=document.getElementsByTagName("body")[0].clientWidth,a.height=document.getElementsByTagName("body")[0].clientHeight);return a},show:function(){var a=this.getWindowSize();this.darkness.style.display="block";this.darkness.style.width=a.width+"px";this.darkness.style.height=a.height+"px";this.holder.style.visibility="visible";this.holder.style.top="0px";this.holder.style.left="0px";this.holder.style.width=a.width+"px";this.holder.style.height=
a.height+"px";this.overlayVisible=!0},adjust:function(a,b){var d=this.getWindowSize(),e=Math.round(d.height/20);this.overlay.style.width=a+"px";this.overlay.style.marginLeft="-"+(Math.round(a/2)+8)+"px";b>d.height-2*e?(this.overlay.style.marginTop=this.overlay.style.marginBottom=e+"px",document.body.style.overflowY="hidden"):this.overlay.style.marginTop=this.overlay.style.marginBottom=Math.round((d.height-b)/2)+"px";if(d=this.overlay.getElementsByTagName("iframe")[0])d.style.width=a+"px",d.style.height=
b+"px"},hide:function(){this.overlayVisible&&(this.darkness.style.display="none",this.darkness.style.width="0px",this.darkness.style.height="0px",this.holder.style.visibility="hidden",this.holder.style.top="-10000px",this.holder.style.left="-10000px",this.overlayVisible=!1,document.body.style.overflowY="")},clear:function(){r.setInnerHtml(this.container,"")},setTitle:function(a){document.getElementById("js_kit_header_title").innerText=a}},w={clsFocused:"gmrSignin__focused",clsChecked:"gmrSignin__checked",
box:null,login:null,domain:null,domainTxt:null,setDomainText:function(){this.domainTxt.innerText=this.domainTxt.textContent="@"+this.domain.value},openSocAuth:function(a,b){a=a||window.event;b({page:(a.target||a.srcElement).getAttribute("data-page")});r.preventDefault(a);r.stopPropagation(a);return!1},setMethods:function(){var a=this;this.vkBtn&&r.addListener(this.vkBtn,"click",function(b){return a.openSocAuth(b,GMR.showVKSigninForm)});this.fbBtn&&r.addListener(this.fbBtn,"click",function(b){return a.openSocAuth(b,
GMR.showFBSigninForm)});this.okBtn&&r.addListener(this.okBtn,"click",function(b){return a.openSocAuth(b,GMR.showOKSigninForm)});r.addListener(this.login,"focusin",function(){r.addClass(a.box,a.clsFocused)});this.stBtn&&r.addListener(this.stBtn,"click",function(b){return a.openSocAuth(b,GMR.showSTSigninForm)});this.rtBtn&&r.addListener(this.rtBtn,"click",function(b){return a.openSocAuth(b,GMR.showRTSigninForm)});r.addListener(this.login,"focusout",function(b){r.removeClass(a.box,a.clsFocused)});r.addListener(this.domain,
"focusin",function(){r.addClass(a.box,a.clsFocused)});r.addListener(this.domain,"focusout",function(){r.removeClass(a.box,a.clsFocused)});r.addListener(this.domain,"change",function(){a.setDomainText()});r.addListener(this.passwordInp,"focusin",function(){r.addClass(a.password,a.clsFocused)});r.addListener(this.passwordInp,"focusout",function(b){r.removeClass(a.password,a.clsFocused)});r.addListener(this.remember,"click",function(b){a.remember.checked?r.addClass(a.remember.parentNode,a.clsChecked):
r.removeClass(a.remember.parentNode,a.clsChecked)})},init:function(){this.vkBtn=r.gebi("js_kit_signin__social__btn_vk");this.fbBtn=r.gebi("js_kit_signin__social__btn_fb");this.okBtn=r.gebi("js_kit_signin__social__btn_ok");this.stBtn=r.gebi("js_kit_signin__social__btn_st");this.rtBtn=r.gebi("js_kit_signin__social__btn_rt");this.box=r.gebi("js_kit_signin__box");this.login=r.gebi("js_kit_signin__box__login");this.domain=r.gebi("js_kit_signin__box__domain");this.domainTxt=r.gebi("js_kit_signin__box__domain__txt");
this.password=r.gebi("js_kit_signin__password");this.passwordInp=r.gebi("js_kit_signin__password__input");this.remember=r.gebi("js_kit_signin__remember");this.setMethods();this.setDomainText()}};GMR.settings={id:null,page:null,signup_page:null,online_interval:6E5,vk_app_id:4775445,vk_enabled:!1,fb_app_id:1,fb_enabled:!1,ok_app_id:1147805952,ok_enabled:!1,st_app_id:381640,st_enabled:!1,rt_app_id:63,rt_enabled:!1};GMR.noconflict=function(){var a=window.GMR;window.GMR=s;return a};GMR.config=function(a){for(var b in a)GMR.settings[b]=
a[b]};GMR.showSignupForm=function(a){a&&window.console&&window.console.warn("Passing {page: '...'} to GMR.showSignupForm is deprecated! Use GMR.config({ page: '...' }) instead.");a=a||{};y.hide();var d=String(GMR.settings.signup_page||GMR.settings.page||a.page||document.location);r.loadXdm(function(){var a=t+"//"+p+"/kit/signup/?page="+encodeURIComponent(d)+"&verification="+encodeURIComponent(GMR.settings.verification||"")+"&site_id="+encodeURIComponent(k)+"&theme="+encodeURIComponent(GMR.settings.theme||
"")+"&set_domain="+(GMR.set_domain||s&&s.set_domain?1:0);y.init();y.setTitle("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f Mail.Ru");y.clear();new easyXDM.Socket({remote:a,swf:t+"//"+x+"/sjs/libs/_easyxdm.swf",container:y.container,props:{frameborder:0,scrolling:"no"},onMessage:function(a,b){g(a,b)}});b()})};GMR.showGamesSigninForm=function(a){a&&window.console&&window.console.warn("Passing {page: '...'} to GMR.showSigninForm is deprecated! Use GMR.config({ page: '...' }) instead.");
a=a||{};y.hide();a=t+"//"+p+"/kit/signin/?page="+encodeURIComponent(String(GMR.settings.page||a.page||document.location))+"&site_id="+encodeURIComponent(k)+"&theme="+encodeURIComponent(GMR.settings.theme||"");GMR.settings.vk_enabled&&(a+="&vk_enabled=1&vk_app_id="+encodeURIComponent(GMR.settings.vk_app_id));GMR.settings.fb_enabled&&(a+="&fb_enabled=1&fb_app_id="+encodeURIComponent(GMR.settings.fb_app_id));GMR.settings.ok_enabled&&(a+="&ok_enabled=1&ok_app_id="+encodeURIComponent(GMR.settings.ok_app_id));
GMR.settings.st_enabled&&(a+="&st_enabled=1&st_app_id="+encodeURIComponent(GMR.settings.st_app_id));GMR.settings.rt_enabled&&(a+="&rt_enabled=1&rt_app_id="+encodeURIComponent(GMR.settings.rt_app_id));GMR.settings.fake_auth_page&&(a+="&fake_auth_page="+GMR.settings.fake_auth_page);GMR.settings.no_domain&&(a+="&no_domain=1");GMR.settings.restore_page&&(a+="&restore_page="+GMR.settings.restore_page);r.loadJSONP(a,function(a){y.init();y.clear();y.setTitle("\u0412\u0445\u043e\u0434");r.setInnerHtml(y.container,
a);y.adjust(440,285);w.init();y.show();b()})};var A=null;GMR.showPortalSigninForm=function(a){function b(e){var f=r.extend({},{email_expand:GMR.settings.fake_auth_page?!0:!1,success_redirect:String(d),custom_registration:!0,fakeauth_url:GMR.settings.fake_auth_page,title_authorized:1,title:1},GMR.settings.portal_signin);GMR.settings.vk_enabled&&(f.vk=GMR.settings.vk_app_id||1);GMR.settings.ok_enabled&&(f.ok=GMR.settings.ok_app_id||1);GMR.settings.fb_enabled&&(f.fb=GMR.settings.fb_app_id||1);GMR.settings.rt_enabled&&
(f.rt=GMR.settings.rt_app_id||1);GMR.settings.st_enabled&&(f.st=GMR.settings.st_app_id||1);e.setSettings(f);e.on("click:signup",function(){e.hide();GMR.showSignupForm({page:a.page})})}a&&window.console&&window.console.warn("Passing {page: '...'} to GMR.showSigninForm is deprecated! Use GMR.config({ page: '...' }) instead.");a=a||{};y.hide();var d=String(a.page||GMR.settings.page||document.location);A?A.show():r.loadScript("https://img.imgsmail.ru/ag/l.js",function(){__AG.then(function(a){A=a;b(A);
A.show()})})};GMR.showSigninForm=function(a){GMR.settings.portal_signin?GMR.showPortalSigninForm(a):GMR.showGamesSigninForm(a)};GMR.showVKSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_vk?display=popup";a.client_id=GMR.settings.vk_app_id;f(a)};GMR.showFBSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_fb?display=popup";a.client_id=GMR.settings.fb_app_id;f(a)};GMR.showOKSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_ok?display=m";
a.client_id=GMR.settings.ok_app_id;f(a)};GMR.showSTSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_st";a.client_id=GMR.settings.st_app_id;a.height=550;f(a)};GMR.showRTSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_rt";a.client_id=GMR.settings.rt_app_id;a.width=500;a.height=583;f(a)};GMR.showRRSigninForm=function(a){a=a||{};a.authurl="https://auth.mail.ru/cgi-bin/oauth2_rambler";a.client_id=GMR.settings.rambler_app_id;a.width=500;a.height=
583;f(a)};GMR.showSetEmailForm=function(a){a=a||{};y.hide();r.loadXdm(function(){var b=t+"//"+p+"/kit/setemail/?page="+encodeURIComponent(a.page||document.location)+"&site_id="+encodeURIComponent(k)+"&theme="+encodeURIComponent(GMR.settings.theme||"")+"&set_domain="+(GMR.set_domain||s&&s.set_domain?1:0);y.init();y.clear();y.setTitle("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 Email \u0430\u0434\u0440\u0435\u0441");new easyXDM.Socket({remote:b,swf:t+"//"+x+"/sjs/libs/_easyxdm.swf",
container:y.container,props:{frameborder:0,scrolling:"no"},onMessage:function(a,b){g(a,b)}})})};GMR.hideOverlay=y.hide;GMR.adjustGameBlock=function(){return!1};GMR.rbFormCompleted=d;GMR.trackOnline=function(){function a(b){b||(b="online");b=t+"//"+u+"/online/set?project_id="+encodeURIComponent(GMR.settings.id)+"&type=gmr&"+b+"=1&rnd="+Math.random();r.loadJSONP(b,function(){})}r.addListener(window,"unload",function(){a("offline")});setInterval(a,GMR.settings.online_interval);a()};var G=void 0;GMR.detectGameCenter=
function(a){function b(){var a=document.createElement("div");a.style.width="0px";a.style.height="0px";a.style.visibility="hidden";document.body.appendChild(a);GameCenter.wsTunEnabled=!0;GameCenter.init(a,function(a){switch(a.Method){case "GetAuthCode":a=r.getCookie("Mpop"),GameCenter.setAuthCode(a)}},function(){},function(){G=!0;d.resolve();clearTimeout(e)},function(){G=!1},0)}var d=GMR.Deferred(),e;if("undefined"!=typeof G)return d[G?"resolve":"reject"](),d.promise();e=setTimeout(function(){G=!1;
d.reject()},1E3*(a||GMR.settings.gc_detect_timeout||3));window.GameCenter?b():r.loadScript("//"+x+"/sjs/common/_gcdapi.js",b);return d.promise()};GMR.downloadGame=function(a,b){a=a||GMR.settings.gc_id;b=b||GMR.settings.download_url;if(!b)throw"No gc_download_url in GMR.downloadGame";if(G&&a){var d=String(a).split("."),e=Number(d[0]),d=Number(d[1]);if(isNaN(e)||isNaN(d))throw"Invalid gc_id in GMR.downloadGame";GameCenter.showGame(e,d,1)}else setTimeout(function(){GMR.showDownloadHint(b)},300),window.location=
b};GMR.detectAndDownload=function(a,b,d){GMR.detectGameCenter(d).always(function(){GMR.downloadGame(a,b)})}})();
/*# sourceMappingURL=/js/kit_client.js.map */